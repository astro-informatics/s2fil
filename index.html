<HTML>
<HEAD>
  <TITLE> S2FIL v1.1 documentation </TITLE>
  <LINK rel="stylesheet" href="stylesheet.css" type="text/css" />
</HEAD>



<H1 ALIGN=center> S2FIL package documentation </H1>

<H3 ALIGN=center> <a href="http:/www.jasonmcewen.org">Jason McEwen </a></H3>

<P> The S2FIL library contains functionality to support optimal
filtering on the sphere.  Optimal directional matched filters (MF) and
scale adaptive filters (SAF) may be constructed from a template and
stochastic background process.  Functionality is incorporated also to
filter a sky data map using an optimal filter and to detect compact
objects using a naive thresholding strategy.  The derivation of the
optimal filters on the sphere implemented here is presented in our
paper:

<blockquote>
J. D. McEwen, M. P. Hobson, and A. N. Lasenby.
<a
href="http://www.jasonmcewen.org/publications.html#mcewen:2006:filters">
Optimal filters on the sphere</a>.
IEEE Trans. Sig. Proc., in press, 2006.
</blockquote>

<P>
The library design is based on object-oriented principles and is
implemented in Fortran 90.  Generally one must instantiate a class
object using the corresponding init routines.  The instatiated object
should be freed once it is no longer required with the corresponding
free routine (this deallocates all memory associated with the object).

<p>
For further details see the
<a href="http://github.com/astro-informatics/s2fil">README.txt</a>
file.


<HR>
<H2> Installation </H2>

<p>
The S2FIL package requires the

<a href="http://www.jasonmcewen.org/codes.html">FastCSWT</a>,
<a href="http://www.jasonmcewen.org/codes.html">COMB</a>,
<a href="http://www.jasonmcewen.org/codes.html">S2</a>,
<a href="http://healpix.jpl.nasa.gov/">HEALPix</a>,
<a
href="http://heasarc.gsfc.nasa.gov/docs/software/fitsio/fitsio.html">CFITSIO</a>
and
<a href=http://www.fftw.org>FFTW 2.1.5</a>
packages.  Please note that all S2FIL code is written in
Fortran 90 and a suitable Fortran compiler will be required.



<H3> Compiling library </H3>

Before compiling you may need to edit the <a href="../makefile">makefile</a> to specify your
compiler and to link with the appropriate libraries.  Once you have
set the makefile up for your system then the S2FIL library may be
compilied by running:
<blockquote>   
<code> >> make lib</code>
</blockquote>

<p>
For details on how to use the S2FIL library code see the documentation
<a href="#library">below<a>.

<H3> Compiling utility programs </H3>
<p>
The S2FIL utility programs may be compiled by running:
<blockquote>   
<code>>> make prog</code>
</blockquote>

For details on how to use the S2FIL utility programs see the documentation
<a href="#utility">below<a>.

<H3> Testing </H3>


<p> Typical input and output files for S2FIL are available for
download <a
href="http://www.mrao.cam.ac.uk/~jdm57/data/s2fil-1.0-data.tar.gz">here</a>.
Untar the data archive and place the <code>data_in</code> and
<code>test_field</code>, <code>test_filter</code> and
<code>test_localise</code> directories within the base s2fil-1.0
directory. 

To test the S2FIL installation a number of scripts are provided.
Firstly, run
<blockquote>   
<code>>> ./construct_and_plot_mf_bfly.sh </code>
</blockquote>
and
<blockquote>   
<code>>> ./construct_and_plot_saf_bfly.sh </code>
</blockquote>

to compute the MF and SAF of the butterfly template respectively.
Filter files are written to the <code>data_filter</code> directory and
should match those files in the <code>test_filter</code>
directory.
Next run
<blockquote>   
<code>>> ./field_construct_mf_bfly.sh </code>
</blockquote>

to perform filtering with the MF (fast filtering is performed using
the <a href="http://www.jasonmcewen.org/codes.html">FastCSWT</a> library).
Filtered field files are written to the <code>data_field</code> directory and
should match those files in the <code>test_field</code>
directory.
Finally, run
<blockquote>   
<code>>> ./localise_mf_bfly.sh </code>
</blockquote>
to perform a naive thresholding strategy to detect embedded objects
from the filtered field.  Related files are written to the 
<code>data_localise</code> directory and
should match those files in the <code>test_localise</code>
directory.
The map contained in the 
<code>data_localise/bfly_obj_loc.fits</code> file shows the recovered
objects and may be compared to the actual embedded objects shown in
the map contained in the <code>data_in/bfly_obj.fits</code> file.

<H3> Documentation </H3>
<p>
By default, the S2FIL code ships with only this single documentation
page.  The remainder of the documentation is automatically generated
from the source code using 
<a href="http://theory.lcs.mit.edu/~edemaine/f90doc/">f90doc</a>.  
Please ensure that you have f90doc installed in order to generate this
documentation.  Once f90doc is installed the documentation may be 
generated by running:
<blockquote>   
<code>>> make docs</code>
</blockquote>

<H3> Cleaning up </H3>

To clean up your version of the S2FIL code and return all code to its
original state run:
<blockquote>   
<code>>> make clean</code>
</blockquote>

To remove all documentation, except the front page (i.e. this file),
run:
<blockquote>   
<code>>> make cleandocs</code>
</blockquote>






<HR>
<a name="library"><H2> Library classes </H2></a>


An overview of the classes that comprise the S2FIL library is given
here.  Please click on the link for each class for detailed
documentation. 

<p>
<CODE><a href=s2fil_field_mod.html>s2fil_field_mod</a></CODE>: 
 Functionality to compute and store the coefficients of a filtered
 field from the optimal filter and data sky map. Interfaces with the
 CSWT library to actually compute the `wavelet' coefficients. 

<p>
<CODE><a href=s2fil_filter_mod.html>s2fil_filter_mod</a></CODE>: 
 Functionality to compute (and store) optimal filters from a
 background noise process and template function defined on the
 sky. Both spherical directional matched filters and scale adaptive
 filters may be constructed. Filters at various scales may be
 constrcuted either by dilating the original template (`correct'
 approach) or by dilating the first computed optimal filter. 

<p>
<CODE><a href=s2fil_types_mod.html>s2fil_types_mod</a></CODE>: 
 Definition of intrinsic types and constants used in the s2fil
 library. 

<p>
<CODE><a href=s2fil_error_mod.html>s2fil_error_mod</a></CODE>: 
 Functionality to handle errors that may occur in the S2FIL
 library. Public S2FIL error codes are defined, with corresponding
 private error comments and default halt execution status. 


<HR>
<a name="utility"><H2> Utility programs </H2></a>

Utility programs based on the S2FIL library are listed here.  More S2FIL
programs may appear here in the future as their need becomes
apparent.  Please click on the link for each program for detailed
documentation. 

<P>
<CODE><a href=s2fil_filter_construct.html>s2fil_filter_construct</a></CODE>: 
 Compute optimal filter from template and background process.

<P>
<CODE><a href=s2fil_field_construct.html>s2fil_field_construct</a></CODE>: 
 Construct filtered field from optimal filter and data sky.

<P>
<CODE><a
 href=s2fil_localisation_thres.html>s2fil_localisation_thres</a></CODE>:
 Find localised regions in filtered field using thresholding
 strategy. Locations and values found are written to the standard
 output.

<P>
<CODE><a href=s2fil_draw_dots.html>s2fil_draw_dots</a></CODE>: 
Draw dots on sky map at specified positions.

<P>
<CODE><a href=s2fil_draw_dots_only.html>s2fil_draw_dots_only</a></CODE>: 
Draw dots at specified positions on constant value map.

 
<HR>
<H2> Support  </H2>

For support or to report any bugs please contact Jason McEwen 
(<CODE>mcewen@mrao.cam.ac.uk</CODE>).



<HR>
<H2> Reference  </H2>

If you use the code to produce published works please
reference the download site
<a
href="http://github.com/astro-informatics/s2fil">http://github.com/astro-informatics/s2fil</a>
and our
related paper:

<blockquote>
J. D. McEwen, M. P. Hobson, and A. N. Lasenby.
<a
href="http://www.jasonmcewen.org/publications.html#mcewen:2006:filters">
Optimal filters on the sphere</a>.
IEEE Trans. Sig. Proc., 56(8), 3813-3823, 2008.
</blockquote>

<blockquote> J. D. McEwen, S. M. Feeney, M. C. Johnson, and
H. V. Peiris.  <a
href="http://www.jasonmcewen.org/publications.html#mcewen:bubble_filters">
Optimal filters for detecting cosmic bubble collisions</a>.
Phys. Rev. D., 85(10):103502, 2012.  </blockquote>


<HR>
<H2> Version </H2>

<P>
<STRONG>Author:</STRONG> J. D. McEwen
<P>
<STRONG>Version:</STRONG> 1.1
<H3> Version History </H3>

<ul>
<li>Version 1.1<br> 
Support for bubble and texture templates.

<p>
<li>Version 1.0<br> 
Initial public release.
  
<p>
<li>Version 0.1<br>
Original version.

</ul>



<HR>
<H2> License </H2>

     <blockquote>
     <p>
     S2fil package to provide functionality for optimal filtering 
     on the sphere<br>
     Copyright (C) 2005  Jason McEwen

     <p>
     This program is free software; you can redistribute it and/or
     modify it under the terms of the GNU General Public License
     as published by the Free Software Foundation; either version 2
     of the License, or (at your option) any later version.

     <p>
     This program is distributed in the hope that it will be useful,
     but WITHOUT ANY WARRANTY; without even the implied warranty of
     MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
     GNU General Public License for more details 
     (LICENSE.txt).

     <p>
     You should have received a copy of the GNU General Public License
     along with this program; if not, write to the Free Software
     Foundation, Inc., 51 Franklin Street, Fifth Floor, Boston,
     MA  02110-1301, USA.
     
     </blockquote>

<HR>
<H2> Acknowledgements </H2>

<p>
JDM would like to thank Mike Hobson for very useful discussions on
optimal filter theory on the sphere.

<p>
This documentation has been generated largely by <a
href="http://theory.lcs.mit.edu/~edemaine/f90doc/">f90doc</a>, with
some minor modifications.


<HR>
<p align=right>
<font size="0.8em">Last modified: 1 July 2008</font>

</HTML>

